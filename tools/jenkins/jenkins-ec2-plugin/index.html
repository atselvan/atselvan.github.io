



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://docs.privatesquare.in/tools/jenkins/jenkins-ec2-plugin/">
      
      
        <meta name="author" content="Allan Tony Selvan">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/logo-black.svg">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.0">
    
    
      
        <title>Running Dynamic Jenkins slaves on AWS - Private Square's Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.aa3de92b.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#running-dynamic-jenkins-slaves-on-aws" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.privatesquare.in" title="Private Square's Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/images/logo-white.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Private Square's Documentation
              </span>
              <span class="md-header-nav__topic">
                Running Dynamic Jenkins slaves on AWS
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/atselvan/atselvan.github.io/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      atselvan/atselvan.github.io
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../.." title="Home" class="md-tabs__link">
          Home
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../docker/" title="Docker" class="md-tabs__link">
          Docker
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../golang/" title="Golang" class="md-tabs__link">
          Golang
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../ansible/" title="Ansible" class="md-tabs__link">
          Ansible
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Jenkins" class="md-tabs__link md-tabs__link--active">
          Jenkins
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../openldap/" title="OpenLDAP" class="md-tabs__link">
          OpenLDAP
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../aws/" title="AWS" class="md-tabs__link">
          AWS
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../assets/images/logo-white.svg" width="24" height="24">
      
    </span>
    Private Square's Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/atselvan/atselvan.github.io/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      atselvan/atselvan.github.io
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Home
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/cicd-fundamentals/" title="CICD" class="md-nav__link">
      CICD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/networking-fundamentals/" title="Networking" class="md-nav__link">
      Networking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/host-internet-accessible-website-on-laptop/" title="Host internet accessible website on your laptop" class="md-nav__link">
      Host internet accessible website on your laptop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/cloud-computing/" title="Cloud Computing" class="md-nav__link">
      Cloud Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/raft-consensus-algorithm/" title="Raft Consesus Algorithm" class="md-nav__link">
      Raft Consesus Algorithm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/container-orchestration/" title="Containers and Container Orchestration" class="md-nav__link">
      Containers and Container Orchestration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/container-orchestration-tools/" title="Container Orchestration Tools" class="md-nav__link">
      Container Orchestration Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/internet-of-things/" title="Internet Of Things" class="md-nav__link">
      Internet Of Things
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/understanding-iaas-paas-saas/" title="IAAS, PAAS and SAAS" class="md-nav__link">
      IAAS, PAAS and SAAS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/docker-compose/" title="Docker Compose" class="md-nav__link">
      Docker Compose
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/docker-machine/" title="Docker Machine" class="md-nav__link">
      Docker Machine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/docker-networks/" title="Docker Networks" class="md-nav__link">
      Docker Networks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/docker-secrets/" title="Docker Secrets" class="md-nav__link">
      Docker Secrets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Golang
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Golang
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/http-request/" title="Http Request in Go" class="md-nav__link">
      Http Request in Go
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/http-request-proxy/" title="Http Request via a Proxy" class="md-nav__link">
      Http Request via a Proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/string-functions/" title="String Functions" class="md-nav__link">
      String Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/slices/" title="Slices in Go" class="md-nav__link">
      Slices in Go
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../golang/modify-usage-flag/" title="Modify Go Usage flag" class="md-nav__link">
      Modify Go Usage flag
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Ansible
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Ansible
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/ansible101/" title="Ansible 101" class="md-nav__link">
      Ansible 101
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Jenkins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Jenkins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../access-control-rbac/" title="Access Control in Jenkins" class="md-nav__link">
      Access Control in Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../analytics/" title="Cloudbees Jenkins Analytics (CJA)" class="md-nav__link">
      Cloudbees Jenkins Analytics (CJA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../clone/" title="Cloning a Jenkins Master instance" class="md-nav__link">
      Cloning a Jenkins Master instance
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Running Dynamic Jenkins slaves on AWS
      </label>
    
    <a href="./" title="Running Dynamic Jenkins slaves on AWS" class="md-nav__link md-nav__link--active">
      Running Dynamic Jenkins slaves on AWS
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-create-a-policy" title="1. Create a Policy" class="md-nav__link">
    1. Create a Policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-create-a-group" title="2. Create a Group" class="md-nav__link">
    2. Create a Group
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-create-a-user" title="3. Create a user" class="md-nav__link">
    3. Create a user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-create-a-key-pair" title="4. Create a key-pair" class="md-nav__link">
    4. Create a key-pair
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-a-security-group" title="5. Create a security group" class="md-nav__link">
    5. Create a security group
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-install-the-amazon-ec2-plugin-in-jenkins" title="6. Install the Amazon EC2 plugin in Jenkins" class="md-nav__link">
    6. Install the Amazon EC2 plugin in Jenkins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-configure-the-plugin" title="7. Configure the Plugin" class="md-nav__link">
    7. Configure the Plugin
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../even-scheduler-plugin/" title="How does Jenkins decide where to run any give build" class="md-nav__link">
      How does Jenkins decide where to run any give build
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      OpenLDAP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        OpenLDAP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../openldap/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openldap/install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openldap/config/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openldap/ldap-server-error-codes/" title="Server Error Codes" class="md-nav__link">
      Server Error Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openldap/faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      AWS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        AWS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/cloud-computing/" title="Cloud Computing" class="md-nav__link">
      Cloud Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/global-infrastructure/" title="Global Infrastructure" class="md-nav__link">
      Global Infrastructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/security-identity-compliance/" title="Security, Identity and Compliance" class="md-nav__link">
      Security, Identity and Compliance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/compute/" title="Compute" class="md-nav__link">
      Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/storage/" title="Storage" class="md-nav__link">
      Storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/networking-and-content-delivery/" title="Networking and Content Delivery" class="md-nav__link">
      Networking and Content Delivery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/management-tools/" title="Management Tools" class="md-nav__link">
      Management Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/database/" title="Database" class="md-nav__link">
      Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/migration/" title="Migration" class="md-nav__link">
      Migration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/developer-tools/" title="Developer Tools" class="md-nav__link">
      Developer Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/machine-learning/" title="Machine Learning" class="md-nav__link">
      Machine Learning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/analytics/" title="Analytics" class="md-nav__link">
      Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/mobile-services/" title="Mobile Services" class="md-nav__link">
      Mobile Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/application-integration/" title="Application Integration" class="md-nav__link">
      Application Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/customer-engagement/" title="Customer Engagement" class="md-nav__link">
      Customer Engagement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/business-productivity/" title="Business Productivity" class="md-nav__link">
      Business Productivity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/desktop-and-app-streaming/" title="Desktop and App Streaming" class="md-nav__link">
      Desktop and App Streaming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/internet-of-things/" title="Internet Of Things" class="md-nav__link">
      Internet Of Things
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/services/game-development/" title="Game Development" class="md-nav__link">
      Game Development
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../aws/awscli/" title="AWS CLI on Mac" class="md-nav__link">
      AWS CLI on Mac
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-create-a-policy" title="1. Create a Policy" class="md-nav__link">
    1. Create a Policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-create-a-group" title="2. Create a Group" class="md-nav__link">
    2. Create a Group
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-create-a-user" title="3. Create a user" class="md-nav__link">
    3. Create a user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-create-a-key-pair" title="4. Create a key-pair" class="md-nav__link">
    4. Create a key-pair
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-a-security-group" title="5. Create a security group" class="md-nav__link">
    5. Create a security group
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-install-the-amazon-ec2-plugin-in-jenkins" title="6. Install the Amazon EC2 plugin in Jenkins" class="md-nav__link">
    6. Install the Amazon EC2 plugin in Jenkins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-configure-the-plugin" title="7. Configure the Plugin" class="md-nav__link">
    7. Configure the Plugin
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/atselvan/atselvan.github.io/edit/master/docs/tools/jenkins/jenkins-ec2-plugin.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="running-dynamic-jenkins-slaves-on-aws">Running Dynamic Jenkins slaves on AWS<a class="headerlink" href="#running-dynamic-jenkins-slaves-on-aws" title="Permanent link">&para;</a></h1>
<p>If you are a Jenkins Administrator and you are maintaining a Jenkins cluster in a on-premise infrastructure you may have noticed that maintaining Jenkins slaves can becomes a painful task in the long run. A long list of development tools to be installed, multiple teams building on the same slave leading to one build affected by another, cleaning up the slaves, etc etc. the list can go on. There are some of the activities and maintenance tasks that you would have to do on all the slaves.</p>
<p>When more capacity is required more slaves are added to the list, which increases the maintenance tasks by the number of new slaves that are added to the cluster.</p>
<p>In the cluster we manage, there is currently 1 CJOC instance, 10 Jenkins Masters and 64 slaves running two services each. We created all sorts of provisioning scripts and cleanup scripts to make sure the slaves are provisioned and configured identically and also function as required. But this is not easy to manage. Also the slave are always online even though there are no build running on these machines.</p>
<p>The Jenkins EC2 plugin can be of great help in such scenarios. With this plugin and an AWS account a Jenkins Master can dynamically create new slaves using a configurable AMI. The AMI can be created with all the required build tools already installed in it or the inline scripts space in the plugin configuration could be used to install the build tools on the slave. Im more capacity is required automatically new slaves will be created and if the slaves are idle for a configured amount of time the machines will be automatically either stopped or terminated (based on your configuration). Thus the setup is also cost efficient.</p>
<p>Below steps explain how the Amazon EC2 plugin can be setup in a Jenkins Master.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Below steps assume that you already have a AWS account and that you have a basic overview of the IAM and EC2 services of AWS and of Jenkins.</p>
</div>
<h2 id="1-create-a-policy">1. Create a Policy<a class="headerlink" href="#1-create-a-policy" title="Permanent link">&para;</a></h2>
<p>Create a policy in AWS to manage the permission for the user which will be created in the next steps. The policy definition is mentioned below:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;ec2:DescribeSpotInstanceRequests&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CancelSpotInstanceRequests&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:GetConsoleOutput&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RequestSpotInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RunInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:StartInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:StopInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:TerminateInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:CreateTags&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DeleteTags&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeKeyPairs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeRegions&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeImages&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeAvailabilityZones&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeSecurityGroups&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:DescribeSubnets&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p><img alt="aws-iam-policy" src="../images/jenkins-aws-policy.png" /></p>
<h2 id="2-create-a-group">2. Create a Group<a class="headerlink" href="#2-create-a-group" title="Permanent link">&para;</a></h2>
<p>Once you have created a policy, create and group and assign the jenkins-aws policy created in step 1 to the group.</p>
<p><img alt="aws-iam-group" src="../images/jenkins-aws-iam-group.png" /></p>
<h2 id="3-create-a-user">3. Create a user<a class="headerlink" href="#3-create-a-user" title="Permanent link">&para;</a></h2>
<p>Create a user in your AWS account and add the user to the jenkins-aws group creted in step 2. The user should have programatic access to the AWS account. The user will be only able to perform the activities that are allowed by the jenkins-aws policy.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you have saved the Access Key ID and the Secret access key for the user because this needs to be saved in the jenkins credentials manager.</p>
</div>
<p><img alt="aws-iam-user" src="../images/jenkins-aws-iam-user.png" /></p>
<h2 id="4-create-a-key-pair">4. Create a key-pair<a class="headerlink" href="#4-create-a-key-pair" title="Permanent link">&para;</a></h2>
<p>Create a key-pair to enable Jenkins to use this key to ssh and configure the Ec2 instances as slaves. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Again do not forget to download the pem file and save it as it has to be configured in Jenkins.</p>
</div>
<p><img alt="aws-ec2-keypair" src="../images/jenkins-aws-key-pair.png" /></p>
<h2 id="5-create-a-security-group">5. Create a security group<a class="headerlink" href="#5-create-a-security-group" title="Permanent link">&para;</a></h2>
<p>Create a security group to define the input output connections to the EC2 instances.</p>
<p><img alt="aws-ec2-sg" src="../images/jenkins-aws-security-group.png" /></p>
<h2 id="6-install-the-amazon-ec2-plugin-in-jenkins">6. Install the Amazon EC2 plugin in Jenkins<a class="headerlink" href="#6-install-the-amazon-ec2-plugin-in-jenkins" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/jenkinsci/ec2-plugin/releases">Download</a> and install the Amazon EC2 plugin in your Jenkins instance. You can also use the Jenkins plugins manager for installing the plugin.</p>
<p><img alt="amazon-ec2-plugin" src="../images/jenkins-aws-ec2-plugin.png" /></p>
<h2 id="7-configure-the-plugin">7. Configure the Plugin<a class="headerlink" href="#7-configure-the-plugin" title="Permanent link">&para;</a></h2>
<p>First configure the access key Id and secret access key of the user created in step 3 as aws credentials in the Jenkins credentials manager.</p>
<p>To configure the plugin go to <code class="codehilite">Manage Jenkins -&gt; Configure System</code> and then search for the cloud option (This is normally at the end of the config page). follow the below images for the configuration.</p>
<p><img alt="amazon-ec2-plugin-conf" src="../images/jenkins-aws-ec2-plugin-conn.png" /></p>
<p>Once you give a <code class="codehilite">Name</code> and select the <code class="codehilite">Amazon EC2 credentials</code> the <code class="codehilite">Region</code> dropdown should load automatically. If this is not the case then there is some issue with either creation of the user account or in saving the credentials in jenkins or it can be a network issue between your Jenkins instance and your AWS account. </p>
<p>The <code class="codehilite">EC2 Key Pair&#39;s Private Key</code> will be the key you saved in step 4.</p>
<p>You can also verify the connection using <code class="codehilite">Test Connection</code> option.</p>
<p>Next, configure the AMI you would like to use for the slaves. Mention the security group created in step 5 in the AMI configuration.</p>
<p><img alt="amazon-ec2-plugin-ami-1" src="../images/jenkins-aws-ec2-plugin-ami-1.png" />
<img alt="amazon-ec2-plugin-ami-2" src="../images/jenkins-aws-ec2-plugin-ami-2.png" />
<img alt="amazon-ec2-plugin-ami-3" src="../images/jenkins-aws-ec2-plugin-ami-3.png" /></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can configure multiple AMI's here with different labels based on your requirements.</p>
</div>
<p>Once you have configured the plugin just build some jobs and see the magic!!</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../clone/" title="Cloning a Jenkins Master instance" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Cloning a Jenkins Master instance
              </span>
            </div>
          </a>
        
        
          <a href="../even-scheduler-plugin/" title="How does Jenkins decide where to run any give build" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How does Jenkins decide where to run any give build
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2018 Private Square
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://linkedin.com/in/atselvan" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://github.com/atselvan" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://bitbucket.org/privatesquare" class="md-footer-social__link fa fa-bitbucket"></a>
    
      <a href="https://www.facebook.com/allantonyselvan" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/allanselvan" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.instagram.com/_atselvan" class="md-footer-social__link fa fa-instagram"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.9fb73e57.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>